const _0x317d14=_0x4f8b;function _0x3bf5(){const _0x37ac37=['5MrsBGb','-vf','setFfmpegPath','from','packname','author','-loop','length','.webp','1273239oumMEi','stringify','18yhkuVE','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','readFileSync','258114fAueSK','fluent-ffmpeg','14835328vGmNam','https://github.com/DikaArdnt/Hisoka-Morou','exports','@ffmpeg-installer/ffmpeg','.mp4','-vsync','toFormat','path','test','3658476uFmism','readUIntLE','toString','825500aIMnnR','mimetype','addOutputOptions','exif','6787MmpDwp','writeUIntLE','node-webpmux','1676822dMxndI','join','30CKNwWv','Image','-vcodec','categories','unlinkSync','save','randomBytes','-an','libwebp','utf-8','webp','load','error','default','data','concat','end','20180wqJrIH','writeFileSync'];_0x3bf5=function(){return _0x37ac37;};return _0x3bf5();}(function(_0x44f309,_0x433453){const _0x3ade25=_0x4f8b,_0x956092=_0x44f309();while(!![]){try{const _0x5f4826=-parseInt(_0x3ade25(0x163))/0x1+parseInt(_0x3ade25(0x16c))/0x2*(-parseInt(_0x3ade25(0x155))/0x3)+parseInt(_0x3ade25(0x160))/0x4*(-parseInt(_0x3ade25(0x147))/0x5)+-parseInt(_0x3ade25(0x152))/0x6*(-parseInt(_0x3ade25(0x16a))/0x7)+parseInt(_0x3ade25(0x157))/0x8+parseInt(_0x3ade25(0x150))/0x9+parseInt(_0x3ade25(0x17d))/0xa*(parseInt(_0x3ade25(0x167))/0xb);if(_0x5f4826===_0x433453)break;else _0x956092['push'](_0x956092['shift']());}catch(_0x2f870b){_0x956092['push'](_0x956092['shift']());}}}(_0x3bf5,0xe2cae));const fs=require('fs'),{tmpdir}=require('os'),Crypto=require('crypto'),ff=require(_0x317d14(0x156)),ffmpegPath=require(_0x317d14(0x15a))[_0x317d14(0x15e)],webp=require(_0x317d14(0x169)),path=require(_0x317d14(0x15e));function _0x4f8b(_0x582dc5,_0x564dae){const _0x3bf5e8=_0x3bf5();return _0x4f8b=function(_0x4f8bf7,_0x3b9b53){_0x4f8bf7=_0x4f8bf7-0x146;let _0x205e04=_0x3bf5e8[_0x4f8bf7];return _0x205e04;},_0x4f8b(_0x582dc5,_0x564dae);}ff[_0x317d14(0x149)](ffmpegPath);async function imageToWebp(_0x52aed7){const _0x3d7651=_0x317d14,_0x133307=path[_0x3d7651(0x16b)](tmpdir(),Crypto[_0x3d7651(0x172)](0x6)[_0x3d7651(0x161)](0x0,0x6)[_0x3d7651(0x162)](0x24)+_0x3d7651(0x14f)),_0x2f68d2=path['join'](tmpdir(),Crypto[_0x3d7651(0x172)](0x6)[_0x3d7651(0x161)](0x0,0x6)[_0x3d7651(0x162)](0x24)+'.jpg');fs[_0x3d7651(0x146)](_0x2f68d2,_0x52aed7),await new Promise((_0x4377b5,_0x1b3589)=>{const _0x509675=_0x3d7651;ff(_0x2f68d2)['on'](_0x509675(0x178),_0x1b3589)['on'](_0x509675(0x17c),()=>_0x4377b5(!![]))['addOutputOptions']([_0x509675(0x16e),_0x509675(0x174),_0x509675(0x148),'scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse'])[_0x509675(0x15d)](_0x509675(0x176))['save'](_0x133307);});const _0x48af8a=fs[_0x3d7651(0x154)](_0x133307);return fs[_0x3d7651(0x170)](_0x133307),fs[_0x3d7651(0x170)](_0x2f68d2),_0x48af8a;}async function videoToWebp(_0x26d4a3){const _0x551f5c=_0x317d14,_0x142875=path[_0x551f5c(0x16b)](tmpdir(),Crypto[_0x551f5c(0x172)](0x6)[_0x551f5c(0x161)](0x0,0x6)['toString'](0x24)+'.webp'),_0x51d27f=path['join'](tmpdir(),Crypto['randomBytes'](0x6)[_0x551f5c(0x161)](0x0,0x6)['toString'](0x24)+_0x551f5c(0x15b));fs[_0x551f5c(0x146)](_0x51d27f,_0x26d4a3),await new Promise((_0x6d1a32,_0x5e95f4)=>{const _0x1e72da=_0x551f5c;ff(_0x51d27f)['on'](_0x1e72da(0x178),_0x5e95f4)['on'](_0x1e72da(0x17c),()=>_0x6d1a32(!![]))[_0x1e72da(0x165)]([_0x1e72da(0x16e),_0x1e72da(0x174),_0x1e72da(0x148),_0x1e72da(0x153),_0x1e72da(0x14d),'0','-ss','00:00:00','-t','00:00:05','-preset',_0x1e72da(0x179),_0x1e72da(0x173),_0x1e72da(0x15c),'0'])[_0x1e72da(0x15d)](_0x1e72da(0x176))[_0x1e72da(0x171)](_0x142875);});const _0xef9ae1=fs[_0x551f5c(0x154)](_0x142875);return fs[_0x551f5c(0x170)](_0x142875),fs['unlinkSync'](_0x51d27f),_0xef9ae1;}async function writeExifImg(_0x26add0,_0x123778){const _0x593ce2=_0x317d14;let _0x4475bf=await imageToWebp(_0x26add0);const _0x581142=path[_0x593ce2(0x16b)](tmpdir(),Crypto[_0x593ce2(0x172)](0x6)[_0x593ce2(0x161)](0x0,0x6)[_0x593ce2(0x162)](0x24)+_0x593ce2(0x14f)),_0x2be2e1=path[_0x593ce2(0x16b)](tmpdir(),Crypto['randomBytes'](0x6)[_0x593ce2(0x161)](0x0,0x6)[_0x593ce2(0x162)](0x24)+_0x593ce2(0x14f));fs['writeFileSync'](_0x581142,_0x4475bf);if(_0x123778[_0x593ce2(0x14b)]||_0x123778[_0x593ce2(0x14c)]){const _0x4de680=new webp[(_0x593ce2(0x16d))](),_0x2af28c={'sticker-pack-id':_0x593ce2(0x158),'sticker-pack-name':_0x123778[_0x593ce2(0x14b)],'sticker-pack-publisher':_0x123778[_0x593ce2(0x14c)],'emojis':_0x123778[_0x593ce2(0x16f)]?_0x123778[_0x593ce2(0x16f)]:['']},_0x4d2707=Buffer[_0x593ce2(0x14a)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x519e25=Buffer[_0x593ce2(0x14a)](JSON[_0x593ce2(0x151)](_0x2af28c),_0x593ce2(0x175)),_0x2b95e6=Buffer[_0x593ce2(0x17b)]([_0x4d2707,_0x519e25]);return _0x2b95e6[_0x593ce2(0x168)](_0x519e25[_0x593ce2(0x14e)],0xe,0x4),await _0x4de680['load'](_0x581142),fs[_0x593ce2(0x170)](_0x581142),_0x4de680[_0x593ce2(0x166)]=_0x2b95e6,await _0x4de680[_0x593ce2(0x171)](_0x2be2e1),_0x2be2e1;}}async function writeExifVid(_0x57a8c6,_0x4e91c4){const _0x14cd62=_0x317d14;let _0x23f511=await videoToWebp(_0x57a8c6);const _0x5929c9=path[_0x14cd62(0x16b)](tmpdir(),Crypto[_0x14cd62(0x172)](0x6)[_0x14cd62(0x161)](0x0,0x6)[_0x14cd62(0x162)](0x24)+_0x14cd62(0x14f)),_0x5d03ed=path[_0x14cd62(0x16b)](tmpdir(),Crypto[_0x14cd62(0x172)](0x6)[_0x14cd62(0x161)](0x0,0x6)[_0x14cd62(0x162)](0x24)+'.webp');fs[_0x14cd62(0x146)](_0x5929c9,_0x23f511);if(_0x4e91c4[_0x14cd62(0x14b)]||_0x4e91c4[_0x14cd62(0x14c)]){const _0x566a72=new webp[(_0x14cd62(0x16d))](),_0x34e629={'sticker-pack-id':_0x14cd62(0x158),'sticker-pack-name':_0x4e91c4['packname'],'sticker-pack-publisher':_0x4e91c4[_0x14cd62(0x14c)],'emojis':_0x4e91c4['categories']?_0x4e91c4[_0x14cd62(0x16f)]:['']},_0x32bc2e=Buffer[_0x14cd62(0x14a)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x572726=Buffer['from'](JSON[_0x14cd62(0x151)](_0x34e629),'utf-8'),_0x2a2cfe=Buffer[_0x14cd62(0x17b)]([_0x32bc2e,_0x572726]);return _0x2a2cfe[_0x14cd62(0x168)](_0x572726[_0x14cd62(0x14e)],0xe,0x4),await _0x566a72[_0x14cd62(0x177)](_0x5929c9),fs[_0x14cd62(0x170)](_0x5929c9),_0x566a72['exif']=_0x2a2cfe,await _0x566a72[_0x14cd62(0x171)](_0x5d03ed),_0x5d03ed;}}async function writeExif(_0x2eeec7,_0x182ae3){const _0x46cd98=_0x317d14;let _0x3ca47f=/webp/['test'](_0x2eeec7[_0x46cd98(0x164)])?_0x2eeec7['data']:/image/[_0x46cd98(0x15f)](_0x2eeec7[_0x46cd98(0x164)])?await imageToWebp(_0x2eeec7['data']):/video/['test'](_0x2eeec7['mimetype'])?await videoToWebp(_0x2eeec7[_0x46cd98(0x17a)]):'';const _0x2432fd=path[_0x46cd98(0x16b)](tmpdir(),Crypto[_0x46cd98(0x172)](0x6)['readUIntLE'](0x0,0x6)[_0x46cd98(0x162)](0x24)+_0x46cd98(0x14f)),_0x236e80=path[_0x46cd98(0x16b)](tmpdir(),Crypto[_0x46cd98(0x172)](0x6)[_0x46cd98(0x161)](0x0,0x6)[_0x46cd98(0x162)](0x24)+'.webp');fs[_0x46cd98(0x146)](_0x2432fd,_0x3ca47f);if(_0x182ae3['packname']||_0x182ae3[_0x46cd98(0x14c)]){const _0x20e041=new webp[(_0x46cd98(0x16d))](),_0x52a1df={'sticker-pack-id':'https://github.com/DikaArdnt/Hisoka-Morou','sticker-pack-name':_0x182ae3[_0x46cd98(0x14b)],'sticker-pack-publisher':_0x182ae3[_0x46cd98(0x14c)],'emojis':_0x182ae3[_0x46cd98(0x16f)]?_0x182ae3[_0x46cd98(0x16f)]:['']},_0x566e9b=Buffer[_0x46cd98(0x14a)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x444660=Buffer[_0x46cd98(0x14a)](JSON[_0x46cd98(0x151)](_0x52a1df),_0x46cd98(0x175)),_0xccaa7f=Buffer[_0x46cd98(0x17b)]([_0x566e9b,_0x444660]);return _0xccaa7f['writeUIntLE'](_0x444660[_0x46cd98(0x14e)],0xe,0x4),await _0x20e041[_0x46cd98(0x177)](_0x2432fd),fs[_0x46cd98(0x170)](_0x2432fd),_0x20e041[_0x46cd98(0x166)]=_0xccaa7f,await _0x20e041[_0x46cd98(0x171)](_0x236e80),_0x236e80;}}module[_0x317d14(0x159)]={'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExif':writeExif};